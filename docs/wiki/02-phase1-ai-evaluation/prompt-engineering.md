# Prompt工程指南

## 📝 核心Prompt设计

### 主系统Prompt

```
你是一位资深的硬笔书法评估专家。
请分析以下硬笔字迹，并从以下四个维度进行评分（各维度都使用0-100分制，最后转换为指定分值）：

1. 笔画质量（权重25%，转换到25分）
   - 评估笔画的流畅性、笔力表现、笔触质感
   - 关注：起笔是否有力、笔画粗细是否均匀、转折处理

2. 结构分析（权重35%，转换到35分）
   - 评估字的整体结构、部件比例、布局均衡
   - 关注：竖笔是否竖直、部件比例是否协调、间距是否均匀

3. 笔画连接（权重15%，转换到15分）
   - 评估笔与笔之间的呼应关系、转折自然度
   - 关注：笔画是否有呼应、转折是否生硬、笔顺是否合理

4. 整体评价（权重25%，转换到25分）
   - 评估字的整体视觉效果、风格统一度、审美表现
   - 关注：整体和谐度、书法气韵、审美价值

请以JSON格式返回评分结果和建议。
```

### 评分Prompt模板

```
请按照以下JSON格式返回评估结果（每个维度的分数范围见括号）：

{
  "brushQuality": {
    "score": <0-25>,
    "explanation": "说明笔画质量的具体情况",
    "strengths": ["优点1", "优点2"],
    "weaknesses": ["缺点1", "缺点2"]
  },
  "structureAnalysis": {
    "score": <0-35>,
    "explanation": "说明结构分析的具体情况",
    "strengths": ["优点1", "优点2"],
    "weaknesses": ["缺点1", "缺点2"]
  },
  "strokeConnection": {
    "score": <0-15>,
    "explanation": "说明笔画连接的具体情况",
    "strengths": ["优点1"],
    "weaknesses": ["缺点1"]
  },
  "overallEvaluation": {
    "score": <0-25>,
    "explanation": "整体审美和风格评价",
    "strengths": ["优点1"],
    "weaknesses": ["缺点1"]
  },
  "suggestions": [
    "建议1：具体的改进方向和方法",
    "建议2：基于评分的针对性建议",
    "建议3：练习重点和学习资源"
  ],
  "totalScore": <总分：笔画质量*0.25 + 结构分析*0.35 + 笔画连接*0.15 + 整体评价*0.25>,
  "level": "<优秀|良好|中等|及格|需改进>",
  "encouragement": "根据总分给出鼓励和激励语"
}
```

## 🎯 Prompt最佳实践

### DO ✅

1. **明确的评分维度**
   ```
   ✅ "从笔画质量维度评估，考虑以下因素：..."
   ```

2. **具体的评估标准**
   ```
   ✅ "优秀（90-100）：笔画有力、线条流畅、笔触清晰"
   ```

3. **结构化输出格式**
   ```
   ✅ JSON格式，字段清晰，易于解析
   ```

4. **包含具体例子**
   ```
   ✅ "例如：竖笔应该是竖直的，不应该倾斜..."
   ```

5. **要求详细解释**
   ```
   ✅ "请解释你的评分依据..."
   ```

### DON'T ❌

1. **不要模糊的评估**
   ```
   ❌ "这个字写得不错"
   ```

2. **不要超出范围**
   ```
   ❌ "评估毛笔技法" (我们只评硬笔)
   ```

3. **不要混淆维度**
   ```
   ❌ 在笔画质量中讨论整体结构
   ```

4. **不要忽视权重**
   ```
   ❌ 各维度评分权重不符合设计
   ```

5. **不要跳过建议**
   ```
   ❌ 只给分数，不提供改进建议
   ```

## 💬 常用Prompt变体

### 详细评估（标准）

```
我要你评估这个硬笔字迹图片。请从以下四个维度给出详细评分：

【笔画质量】(0-25分)
- 笔画是否有力？
- 线条是否流畅？
- 笔触是否清晰？
- 起笔收笔是否果断？

【结构分析】(0-35分)
- 部件比例是否协调？
- 整体是否平衡？
- 间距是否均匀？
- 竖笔是否竖直？

【笔画连接】(0-15分)
- 笔画之间是否有呼应？
- 转折处理是否自然？
- 笔顺是否合理？

【整体评价】(0-25分)
- 风格是否统一？
- 审美表现如何？
- 整体和谐度？

请详细说明每个维度的评分理由，并给出3条具体的改进建议。
```

### 快速评估（简化）

```
快速评估这个硬笔字迹：
- 笔画质量: _/25
- 结构分析: _/35
- 笔画连接: _/15
- 整体评价: _/25
总分: _/100
建议: ...
```

### 对比评估

```
请比较这两个字迹的写法，分别评估其在笔画质量、结构、连接、整体方面的差异，
指出哪一个更优及原因。
```

## 🔍 Prompt调试技巧

### 问题1: 评分不合理

**症状**: 分数与实际字迹质量不符

**解决方案**:
```
添加参考标准：
"对于一个普通初中生的水平，如果：
- 笔画质量>20分 = 不错的笔力
- 结构分析>28分 = 很好的布局
- 笔画连接>12分 = 自然的转折
- 整体评价>20分 = 美观的呈现"
```

### 问题2: 建议不够具体

**症状**: 建议太笼统，如"多练习"

**解决方案**:
```
要求具体：
"建议格式：
1. 问题：(具体指出哪里有问题)
2. 原因：(为什么这样写有问题)
3. 改进方法：(具体怎样改进)
4. 练习方式：(用什么方法练习)
5. 学习资源：(推荐的学习资料或视频)"
```

### 问题3: 输出格式混乱

**症状**: JSON格式不规范，难以解析

**解决方案**:
```
严格规定格式：
"你必须按照以下格式返回，不允许任何偏差：
{
  \"brushQuality\": {
    \"score\": <整数>,
    \"explanation\": \"<字符串>\"
  },
  ...
}
确保JSON有效性。"
```

## 📊 Prompt性能指标

### 检查清单

- [ ] 评分分布是否合理（不能所有字都是高分）
- [ ] 建议是否具有指导意义
- [ ] 评分是否与视觉观察一致
- [ ] JSON输出是否总能有效解析
- [ ] 评估所需时间是否<3秒
- [ ] 用户是否能理解评估结果

## 🚀 优化方向

### 短期优化
1. 增加更多评分案例
2. 细化每个维度的评分标准
3. 改进建议的可操作性

### 中期优化
1. 支持多种书法风格（楷书、行书、隶书等）
2. 加入对比学习（与标准字对比）
3. 个性化建议（根据用户水平调整）

### 长期优化
1. 自监督学习（基于用户反馈优化评估）
2. 多模型融合（结合多个AI模型评估）
3. 实时评估（视频写字过程中的实时反馈）

---

**最后更新**: 2025-12-04
